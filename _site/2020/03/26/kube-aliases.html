<!DOCTYPE html>

<html>

<head>

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>
    Kubectl Aliases - Mijn familie
    
  </title>

  <meta name="description" content="When I started at Transreport, I set up Helm charts for Passenger Assist, to make our deployments easier to set up. In hindsight, it was also a really good w...">

  <link href='https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>

  <link rel="stylesheet" href="/assets/vendor/bootstrap/css/bootstrap.min.css">

  <link rel="stylesheet" href="/assets/vendor/fontawesome-free/css/all.min.css">

  <link rel="stylesheet" href="/assets/main.css">
  <link rel="canonical" href="http://localhost:4000/2020/03/26/kube-aliases.html">
  <link rel="alternate" type="application/rss+xml" title="Mijn familie" href="/feed.xml">

</head>


<body>

  <!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light fixed-top" id="mainNav">
  <div class="container">
    <a class="navbar-brand" href="/">Mijn familie</a>
    <button class="navbar-toggler navbar-toggler-right" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
      Menu
      <i class="fa fa-bars"></i>
    </button>
    <div class="collapse navbar-collapse" id="navbarResponsive">
      <ul class="navbar-nav ml-auto">
        <li class="nav-item">
          <a class="nav-link" href="/">Home</a>
        </li>
        <li class="nav-item">
          <a class="nav-link" href="/posts">Familie</a>
        </li>
      </ul>
    </div>
  </div>
</nav>


  <!-- Page Header -->

<header class="masthead" style="background-image: url('/img/posts/05.jpg')">
  
    <div class="overlay"></div>
    <div class="container">
      <div class="row">
        <div class="col-lg-8 col-md-10 mx-auto">
          <div class="post-heading">
            <h1>Kubectl Aliases</h1>
            
            <h2 class="subheading">How to be speedy</h2>
            
            <span class="meta">Posted by
              <a href="#">Jeroen Rijks</a>
              on March 26, 2020 &middot; <span class="reading-time" title="Estimated read time">
  
   5 mins  read </span>

            </span>
          </div>
        </div>
      </div>
    </div>
  </header>

  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">

        <p>When I started at Transreport, I set up Helm charts for Passenger Assist, to make our deployments easier to set up. In hindsight, it was also a really good way to get to know the company’s products, because to set the Helm charts up, I needed a good understanding of the architecture, and what needs to happen for the program to run.</p>

<p>Working with Kubernetes requires the use of <code class="highlighter-rouge">kubectl</code>, a great command line tool that lets you interact with Kubernetes’ API. However, using <code class="highlighter-rouge">kubectl</code> gets repetitive pretty quickly, especially if you’re working with namespaces; I regularly run commands like these:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>aws eks update-kubeconfig --name &lt;passenger-assist-production-cluster-name&gt;
kubectl get pods -n sqr-emr-staging
kubectl get pod -n pa-staging &lt;pod-name&gt; -o yaml
kubectl describe configmap -n sqr-emr-uat
</code></pre></div></div>

<p>To save time, and to reduce the chance of making a typo, I’ve set up a few aliases, allowing me to replace those commands with:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>kswitchprodpa
kgn po
kgyn po &lt;pod-name&gt;
kdn cm
</code></pre></div></div>

<h3 id="aliases">Aliases</h3>
<p>I (on my Ubuntu 18 OS) use aliases to speed my Kubernetes work up drastically. To avoid writing <code class="highlighter-rouge">kubectl</code>, I added</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias k='kubectl'
</code></pre></div></div>
<p>to my <code class="highlighter-rouge">~/.bashrc</code> file. Every time I open a new terminal, it runs every line in my <code class="highlighter-rouge">~/.bashrc</code> file, which will now replace the letter <code class="highlighter-rouge">k</code> with <code class="highlighter-rouge">kubectl</code>, if I write it at the beginning of a command. Note that any already-open terminals won’t respond to changes in the <code class="highlighter-rouge">~/.bashrc</code> file, unless you run <code class="highlighter-rouge">source ~/.bashrc</code>.</p>

<h2 id="simple-kubectl-aliases">Simple kubectl aliases</h2>
<p>Here are some standard <code class="highlighter-rouge">kubectl</code> commands that I replaced:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias k='kubectl'
alias ka='kubectl apply'
alias kl='kubectl logs'
alias ke='kubectl edit'
alias krm='kubectl delete'
alias kd='kubectl describe'
alias keit='kubectl exec -it'
alias kg='kubectl get'
alias kgsys='kubectl get -n kube-system'
alias wkg='watch kubectl get'
alias kgy='kubectl get -o yaml'
alias kwhere='kubectl config current-context'
</code></pre></div></div>

<h2 id="kubernetes-namespaces">Kubernetes namespaces</h2>
<p>Kubernetes uses namespaces to group resources together, and isolate them from other groups. <code class="highlighter-rouge">kubectl</code> lets you select the namespace you’re interested in by adding <code class="highlighter-rouge">-n &lt;namespace-name&gt;</code> to your <code class="highlighter-rouge">kubectl</code> command. However, most of the time, you’ll need to run several commands in the same namespace, so adding <code class="highlighter-rouge">-n  &lt;namespace-name&gt;</code> gets pretty tedious, especially when namespaces have long names. That’s why I’ve set up these aliases:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias padev='KUBE_NAMESPACE=pa-dev'
alias pastaging='KUBE_NAMESPACE=pa-staging'
### There's a whole lot more of these
</code></pre></div></div>
<p>and</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias kln='kubectl logs -n $KUBE_NAMESPACE'
alias ken='kubectl edit -n $KUBE_NAMESPACE'
alias krmn='kubectl delete -n $KUBE_NAMESPACE'
alias kdn='kubectl describe -n $KUBE_NAMESPACE'
alias keitn='kubectl exec -it -n $KUBE_NAMESPACE'
alias kgn='kubectl get -n $KUBE_NAMESPACE'
alias wkgn='watch kubectl get -n $KUBE_NAMESPACE'
alias kgyn='kubectl get -o yaml -n $KUBE_NAMESPACE'
</code></pre></div></div>

<p>Now, simply adding an <code class="highlighter-rouge">n</code> to the end of my standard <code class="highlighter-rouge">kubectl</code> shortcuts stops me from accidentally writing <code class="highlighter-rouge">-n pa-aut</code> and <code class="highlighter-rouge">-n sqr-emr=staging</code> multiple times a day.</p>

<h2 id="switching-clusters">Switching clusters</h2>

<p>At Transreport, we use Terraform to create our EKS clusters, and to avoid naming clashes, their names have randomised strings at the ends. It’s annoying to have to learn them, so instead, I have these aliases set up:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias kswitchnonprodpa='aws eks update-kubeconfig --name &lt;name-of-eks-cluster&gt;&gt;'
alias kswitchprodpa='aws eks update-kubeconfig --name &lt;name-of-eks-cluster&gt;&gt;'
alias kswitchnonprodcommon='aws eks update-kubeconfig --name &lt;name-of-eks-cluster&gt;&gt;'
alias kswitchprodcommon='aws eks update-kubeconfig --name &lt;name-of-eks-cluster&gt;&gt;'
</code></pre></div></div>

<h2 id="helm">Helm</h2>
<p>Helm is essentially a Kubernetes package manager, and its command line tool, <code class="highlighter-rouge">helm</code>, works pretty similarly to <code class="highlighter-rouge">kubectl</code>, in terms of using namespaces. Use the same trick:</p>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias helmn='helm -n $KUBE_NAMESPACE`
alias helmlsn='helm ls -n $KUBE_NAMESPACE`
alias helmgvn='helm get values -n $KUBE_NAMESPACE`
alias helmtp='helm template --output-dir .`
alias helmtpn='helm template --output-dir . -n $KUBE_NAMESPACE`
alias helmsearch='helm search repo'  ### Avoid getting it wrong and typing helm repo search every time.
</code></pre></div></div>

<p>Other helm commands like <code class="highlighter-rouge">helm install</code> probably deserve the time taken to type the command out.</p>

<h3 id="side-note-for-terraform-users">Side note for Terraform users</h3>

<p>Do yourself a favour and never write <code class="highlighter-rouge">terrafrom</code> again:</p>
<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>alias tf='terraform'
alias tfi='terraform init'
alias tfws='terraform workspace'
alias tfwsl='terraform workspace list'
alias tfs='terraform state'
alias tfsl='terraform state list'
alias tfp='terraform plan'
alias tfa='terraform apply'
alias tfaa='terraform apply -auto-approve'   --&gt; Don't use this unless you're a #madlad
</code></pre></div></div>



        <hr>

        <div class="clearfix">

          
          <a class="btn btn-primary float-left" href="/2020/03/01/starting-my-career.html" data-toggle="tooltip" data-placement="top" title="How I started my career">&larr; Previous<span class="d-none d-md-inline">
              Post</span></a>
          
          
          <a class="btn btn-primary float-right" href="/2020/04/09/cloudflare-ddos-protection.html" data-toggle="tooltip" data-placement="top" title="Implementing CloudFlare's DDoS protection">Next<span class="d-none d-md-inline">
              Post</span> &rarr;</a>
          

        </div>

      </div>
    </div>
  </div>


  <!-- Footer -->

<hr>

<footer>
  <div class="container">
    <div class="row">
      <div class="col-lg-8 col-md-10 mx-auto">
        <ul class="list-inline text-center">
          
          <li class="list-inline-item">
            <a href="mailto:jeroen-rijks@hotmail.com">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="far fa-envelope fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          
          
          <li class="list-inline-item">
            <a href="https://www.linkedin.com/in/JeroenRijks">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-linkedin fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
          
          <li class="list-inline-item">
            <a href="https://github.com/JeroenRijks">
              <span class="fa-stack fa-lg">
                <i class="fas fa-circle fa-stack-2x"></i>
                <i class="fab fa-github fa-stack-1x fa-inverse"></i>
              </span>
            </a>
          </li>
          
        </ul>
        <p class="copyright text-muted">Copyright &copy; Jeroen Rijks 2020</p>
      </div>
    </div>
  </div>
</footer>


  <script src="/assets/vendor/jquery/jquery.min.js"></script>
<script src="/assets/vendor/bootstrap/js/bootstrap.bundle.min.js"></script>
<script src="/assets/vendor/startbootstrap-clean-blog/js/clean-blog.min.js"></script>

<script src="/assets/scripts.js"></script>




<!--  <!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id="></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', '');
</script>

-->

</body>

</html>
